import type { BlocId, BlocDefinition, BlocState } from '../types/blocs';
import { ALL_BLOC_IDS } from '../types/blocs';

export const BLOC_DEFINITIONS: Record<BlocId, BlocDefinition> = {
  court: {
    id: 'court',
    name: 'The Court',
    tooltip: 'The judges. They care about precedent, procedure, and pretending politics doesn\'t exist.',
    ideology: 0,
    priorities: ['Institutional tradition', 'rule of law', 'judicial independence'],
    startLoyalty: 60,
    startPower: 70,
    sensitivities: { material: 70, narrative: 30 },
  },
  military: {
    id: 'military',
    name: 'The Generals',
    tooltip: 'They\'d like a bigger budget and a smaller civilian government. Not necessarily in that order.',
    ideology: 30,
    priorities: ['Budget increases', 'homeland security', 'foreign threat response'],
    startLoyalty: 50,
    startPower: 80,
    sensitivities: { material: 75, narrative: 40 },
  },
  enforcers: {
    id: 'enforcers',
    name: 'The Enforcers',
    tooltip: 'Police, border agents, prison guards, intelligence services. The state\'s monopoly on violence, filed under "public safety."',
    ideology: 40,
    priorities: ['Police funding', 'surveillance authority', 'domestic order', 'border security', 'prison budgets'],
    startLoyalty: 45,
    startPower: 50,
    sensitivities: { material: 70, narrative: 55 },
  },
  finance: {
    id: 'finance',
    name: 'The Banks',
    tooltip: 'They don\'t care who governs Miranda, as long as the interest payments are on time.',
    ideology: 20,
    priorities: ['Low inflation', 'debt repayment', 'fiscal austerity', 'Colossus alignment'],
    startLoyalty: 55,
    startPower: 85,
    sensitivities: { material: 85, narrative: 35 },
  },
  industry: {
    id: 'industry',
    name: 'The Factories',
    tooltip: 'What\'s left of heavy industry. They used to make things. Now they mostly make demands.',
    ideology: 15,
    priorities: ['Tariffs', 'infrastructure spending', 'energy subsidies', 'domestic manufacturing'],
    startLoyalty: 45,
    startPower: 55,
    sensitivities: { material: 80, narrative: 30 },
  },
  tech: {
    id: 'tech',
    name: 'Big Tech',
    tooltip: 'They move fast and break things. The "things" are labor laws, privacy, and occasionally democracy.',
    ideology: 10,
    priorities: ['Data rights', 'AI deregulation', 'innovation subsidies', 'platform autonomy'],
    startLoyalty: 50,
    startPower: 60,
    sensitivities: { material: 65, narrative: 55 },
  },
  agri: {
    id: 'agri',
    name: 'The Landowners',
    tooltip: 'They own 60% of Miranda\'s land and 90% of its congressional agricultural committee.',
    ideology: 30,
    priorities: ['Export promotion', 'cheap land', 'deregulation', 'water rights'],
    startLoyalty: 50,
    startPower: 55,
    sensitivities: { material: 75, narrative: 25 },
  },
  mainStreet: {
    id: 'mainStreet',
    name: 'Main Street',
    tooltip: 'Small landlords, family businesses, and the guy who says "nobody wants to work anymore."',
    ideology: 15,
    priorities: ['Order', 'low local taxes', 'anti-crime policy', 'small business protection'],
    startLoyalty: 50,
    startPower: 40,
    sensitivities: { material: 55, narrative: 65 },
  },
  media: {
    id: 'media',
    name: 'The Heralds',
    tooltip: 'The press. Theoretically independent. Practically dependent on advertising from the Banks and Big Tech.',
    ideology: -5,
    priorities: ['Access', 'content freedom', 'press independence', 'advertising revenue'],
    startLoyalty: 55,
    startPower: 65,
    sensitivities: { material: 60, narrative: 70 },
  },
  clergy: {
    id: 'clergy',
    name: 'The Clergy',
    tooltip: 'Moral authority. Their flock is shrinking, but their political influence hasn\'t gotten the memo.',
    ideology: 45,
    priorities: ['Traditional values', 'moral authority', 'religious education', 'charity funding'],
    startLoyalty: 45,
    startPower: 50,
    sensitivities: { material: 55, narrative: 65 },
  },
  academy: {
    id: 'academy',
    name: 'The Scholars',
    tooltip: 'Universities and research institutes. They produce knowledge. Congress produces coasters.',
    ideology: -30,
    priorities: ['Research funding', 'institutional autonomy', 'scientific integrity', 'education quality'],
    startLoyalty: 50,
    startPower: 35,
    sensitivities: { material: 65, narrative: 50 },
  },
  artists: {
    id: 'artists',
    name: 'The Artists',
    tooltip: 'Writers, filmmakers, musicians, critics. Culturally influential. Materially irrelevant. They know this.',
    ideology: -40,
    priorities: ['Social progress', 'free speech', 'cultural funding', 'counter-hegemonic voice'],
    startLoyalty: 45,
    startPower: 30,
    sensitivities: { material: 55, narrative: 70 },
  },
  labor: {
    id: 'labor',
    name: 'The Unions',
    tooltip: 'The organized working class. Emphasis on "organized"... which is the part that keeps getting harder.',
    ideology: -35,
    priorities: ['Wages', 'worker protections', 'public services', 'collective bargaining rights'],
    startLoyalty: 45,
    startPower: 45,
    sensitivities: { material: 70, narrative: 45 },
  },
  syndicate: {
    id: 'syndicate',
    name: 'The Underworld',
    tooltip: 'They don\'t appear in any org chart. They appear in every neighborhood the state forgot.',
    ideology: 0,
    priorities: ['Weak enforcement', 'corruption tolerance', 'informal economy', 'territorial control'],
    startLoyalty: 35,
    startPower: 40,
    sensitivities: { material: 90, narrative: 10 },
  },
};

export function createInitialBlocStates(): Record<BlocId, BlocState> {
  const states = {} as Record<BlocId, BlocState>;
  for (const id of ALL_BLOC_IDS) {
    const def = BLOC_DEFINITIONS[id];
    states[id] = {
      id,
      loyalty: def.startLoyalty,
      power: def.startPower,
      sensitivities: { ...def.sensitivities },
    };
  }
  return states;
}
